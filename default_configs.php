<?php

$config_files[en] = "/stweb.conf";
$config_files[it] = "/stweb_it.conf";
$config_files[es] = "/stweb_es.conf";

/* Default Italian Configuration */
$default_config[it] = "LANGUAGE=Italiano
COLOUR=#000000
TITLE=The SmoothTorque Enterprise Predictive Dialing Platform
LOGO=/images/logo2.png
TEXT=For further information please email sales@venturevoip.com
SOX=/usr/bin/sox
USERID=VentureVoIP
LICENCE=DRFHUJWQIWU
CDR_HOST=localhost
CDR_USER=root
CDR_PASS=
CDR_DB=phoneDB
CDR_TABLE=cdr
MENU_HOME=Home
MENU_CAMPAIGNS=Campagne
MENU_NUMBERS=Numeri
MENU_DNC=DNC Numeri
MENU_MESSAGES=Messaggi
MENU_SCHEDULES=Orari
MENU_CUSTOMERS=Clienti
MENU_QUEUES=Code
MENU_SERVERS=Servers
MENU_TRUNKS=Linee telefoniche
MENU_ADMIN=Amministrazione
MENU_LOGOUT=Logout
DATE_COLOUR=#9999FF
MAIN_PAGE_TEXT=Per iniziare, vai nel tuo elenco di campagne facendo clic sulla scheda Campagne nella parte superiore di questa pagina.
MAIN_PAGE_USERNAME=Nome utente
MAIN_PAGE_PASSWORD=Password
MAIN_PAGE_LOGIN=Accesso
CURRENCY_SYMBOL=€
PER_MINUTE=Al minuto
USE_BILLING=NO
FRONT_PAGE_BILLING=YES
SPARE1=Spare 1 (inutilizzati)
SPARE2=Spare 2 (inutilizzati)
SPARE3=Spare 3 (inutilizzati)
SPARE4=Spare 4 (inutilizzati)
SPARE5=Spare 5 (inutilizzati)
ST_MYSQL_HOST=localhost
ST_MYSQL_USER=root
ST_MYSQL_PASS=
ADD_CAMPAIGN=Aggiungi campagna
VIEW_CAMPAIGN=Visualizza campagne
PER_PAGE=200
NUMBERS_VIEW=Visualizza i numeri di telefono
NUMBERS_SYSTEM=Utilizzare System elenchi
NUMBERS_GENERATE=Generare automaticamente il numero
NUMBERS_MANUAL=Aggiungere manualmente i numeri
NUMBERS_UPLOAD=Carica numeri da un file di testo
NUMBERS_EXPORT=Esporta i numeri di telefono
NUMBERS_SEARCH=Ricerca di un numero di telefono
NUMBERS_TITLE=Numero della lista di gestione
BILLING_TEXT=Log di fatturazione
CDR_TEXT=Chiama Dettagli
USE_GENERATE=YES
DNC_NUMBERS_TITLE=DNC Numeri
DNC_VIEW=Vedere numeri esistenti DNC
DNC_SEARCH=Cerca DNC numeri
DNC_UPLOAD=Carica DNC numeri da un file di testo
DNC_ADD=Aggiungi DNC numeri manualmente
PER_LEAD=Prezzo per portare
SMTP_HOST=localhost
SMTP_USER=
SMTP_PASS=
SMTP_FROM=matt@venturevoip.com
USE_SEPARATE_DNC=NO
ALLOW_NUMBERS_MANUAL=YES
";

/* Default Spanish Configuration */
$default_config[es]="LANGUAGE=Español
COLOUR=#000000
TITLE=The SmoothTorque Enterprise Predictive Dialing Platform
LOGO=/images/logo2.png
TEXT=For further information please email sales@venturevoip.com
SOX=/usr/bin/sox
USERID=VentureVoIP
LICENCE=DRFHUJWQIWU
CDR_HOST=localhost
CDR_USER=root
CDR_PASS=
CDR_DB=phoneDB
CDR_TABLE=cdr
MENU_HOME=Página principal
MENU_CAMPAIGNS=Campañas
MENU_NUMBERS=Números
MENU_DNC=DNC Números
MENU_MESSAGES=Mensajes
MENU_SCHEDULES=Listas
MENU_CUSTOMERS=Clientes
MENU_QUEUES=Colas
MENU_SERVERS=Servidores
MENU_TRUNKS=Líneas telefónicas
MENU_ADMIN=Administración
MENU_LOGOUT=Logout
DATE_COLOUR=#9999FF
MAIN_PAGE_TEXT=Para empezar, vaya en su lista de campañas, haga clic en la pestaña Campañas en la parte superior de esta página.
MAIN_PAGE_USERNAME=Nombre de usuario
MAIN_PAGE_PASSWORD=Contraseña
MAIN_PAGE_LOGIN=Inicio de sesión
CURRENCY_SYMBOL=€
PER_MINUTE=Por minuto
USE_BILLING=NO
FRONT_PAGE_BILLING=YES
SPARE1=Spare 1 (no utilizados)
SPARE2=Spare 2 (no utilizados)
SPARE3=Spare 3 (no utilizados)
SPARE4=Spare 4 (no utilizados)
SPARE5=Spare 5 (no utilizados)
ST_MYSQL_HOST=localhost
ST_MYSQL_USER=root
ST_MYSQL_PASS=
ADD_CAMPAIGN=Añadir Campaña
VIEW_CAMPAIGN=Ver Campañas
PER_PAGE=200
NUMBERS_VIEW=Ver los números de teléfono
NUMBERS_SYSTEM=Utilice sistema de listas
NUMBERS_GENERATE=Generar automáticamente los números
NUMBERS_MANUAL=Añadir manualmente los números de
NUMBERS_UPLOAD=Cargar los números de un archivo de texto
NUMBERS_EXPORT=Exportación números de teléfono
NUMBERS_SEARCH=Búsqueda de un número de teléfono
NUMBERS_TITLE=Número de la gerencia de la lista
BILLING_TEXT=Registros de facturación
CDR_TEXT=Detalles de las llamadas
USE_GENERATE=YES
DNC_NUMBERS_TITLE=Lista de No Llamar
DNC_VIEW=Ver los números de DNC
DNC_SEARCH=Buscar números DNC
DNC_UPLOAD=Subir DNC números de un archivo de texto
DNC_ADD=Añadir manualmente los números de DNC
PER_LEAD=Precio por plomo
SMTP_HOST=localhost
SMTP_USER=
SMTP_PASS=
SMTP_FROM=matt@venturevoip.com
USE_SEPARATE_DNC=NO
ALLOW_NUMBERS_MANUAL=YES
";

/* Default English Configuration */
$default_config[en] = "COLOUR=#323232
TITLE=The SmoothTorque Enterprise Predictive Dialing Platform
LOGO=/images/logo2.png
TEXT=For further information please email sales@venturevoip.com
SOX=/usr/bin/sox
USERID=VentureVoIP
LICENCE=DRFHUJWQIWU
CDR_HOST=localhost
CDR_USER=root
CDR_PASS=
CDR_DB=phoneDB
CDR_TABLE=cdr
MENU_HOME=Home
MENU_CAMPAIGNS=Campaigns
MENU_NUMBERS=Numbers
MENU_DNC=DNC Numbers
MENU_MESSAGES=Messages
MENU_SCHEDULES=Schedules
MENU_CUSTOMERS=Customers
MENU_QUEUES=Queues
MENU_SERVERS=Servers
MENU_TRUNKS=Trunks
MENU_ADMIN=Admin
MENU_LOGOUT=Logout
DATE_COLOUR=#ccccff
MAIN_PAGE_TEXT=To get started, go into your list of campaigns by clicking on the Campaigns tab at the top of this page.
MAIN_PAGE_USERNAME=Username
MAIN_PAGE_PASSWORD=Password
MAIN_PAGE_LOGIN=Login
CURRENCY_SYMBOL=$
PER_MINUTE=Per Minute
USE_BILLING=NO
FRONT_PAGE_BILLING=YES
SPARE1=Spare 1 (unused)
SPARE2=Spare 2 (unused)
SPARE3=Spare 3 (unused)
SPARE4=Spare 4 (unused)
SPARE5=Spare 5 (unused)
ST_MYSQL_HOST=localhost
ST_MYSQL_USER=root
ST_MYSQL_PASS=
ADD_CAMPAIGN=Add Campaign
VIEW_CAMPAIGN=View Campaigns
PER_PAGE=200
NUMBERS_VIEW=View phone numbers
NUMBERS_SYSTEM=Use System Lists
NUMBERS_GENERATE=Generate numbers automatically
NUMBERS_MANUAL=Add number(s) manually
NUMBERS_UPLOAD=Upload numbers from a text file
NUMBERS_EXPORT=Export Phone Numbers
NUMBERS_SEARCH=Search for a phone number
NUMBERS_TITLE=Number List Management
BILLING_TEXT=Billing Logs
CDR_TEXT=Call Details
USE_GENERATE=YES
DNC_NUMBERS_TITLE=Do Not Call List
DNC_VIEW=View existing DNC numbers
DNC_SEARCH=Search DNC numbers
DNC_UPLOAD=Upload DNC numbers from a text file
DNC_ADD=Add DNC number(s) manually
PER_LEAD=Price Per Lead
SMTP_HOST=localhost
SMTP_USER=
SMTP_PASS=
USE_SEPARATE_DNC=NO
SMTP_FROM=matt@venturevoip.com";

$comment = "#";

foreach ($config_files as $current_language=>$filename) {
//echo "Loading Language:$current_language Filename: $filename<br />";
//flush();
if (!file_exists($filename)) {
    // Config file does not exist
    if (is_writable($filename)) {
        if (!$handle = fopen($config_file_es, 'w')) {
            echo "Cannot open file ($filename)";
            exit;
        }
        // Write default config to our opened file.
        if (fwrite($handle, $deault_config[$current_language]) === FALSE) {
            echo "Cannot write to file ($filename)";
            exit;
        }

        $success = true;
        fclose($handle);
    } else {
        echo "The config file $filename does not exist, and is not";
        echo "writeable.  Please issue the following commands:<br /><br />";
        echo "<code>touch $filename</code><br />";
        echo "<code>chown $whoami $filename</code>";
    }
} else {
    // The config file exists. Does it have any content?
    $fp = fopen($filename, "r");
    while (!feof($fp)) {
      $line = trim(fgets($fp));
      if ($line && substr($line,0,1)!=$comment) {
        $pieces = explode("=", $line);
        $option = trim($pieces[0]);
        $value = trim($pieces[1]);
        $config_values_array[$current_language][$option] = $value;
      }
    }
    fclose($fp);

    // Set Defaults
    if ($config_values_array[$current_language]['COLOUR'] == "") {
        if (is_writable($filename)) {
            if (!$handle = fopen($filename, 'w')) {
                echo "Cannot open file ($filename)";
                exit;
            }
            // Write $somecontent to our opened file.
            if (fwrite($handle, $default_config[$current_language]) === FALSE) {
                echo "Cannot write to file ($filename)";
                exit;
            }

            $success = true;
            fclose($handle);
        }
    }
}
}



/*if (file_exists($config_file)) {
    $fp = fopen($config_file, "r");
    while (!feof($fp)) {
      $line = trim(fgets($fp));
      if ($line && substr($line,0,1)!=$comment) {
        $pieces = explode("=", $line);
        $option = trim($pieces[0]);
        $value = trim($pieces[1]);
        $config_values[$option] = $value;
      }
    }
    fclose($fp);

    // Set Defaults

    if ($config_values['COLOUR'] == "") {
        if (is_writable($config_file)) {

            // In our example we're opening $filename in append mode.
            // The file pointer is at the bottom of the file hence
            // that's where $somecontent will go when we fwrite() it.
            if (!$handle = fopen($config_file, 'w')) {
                 echo "Cannot open file ($filename)";
                 exit;
            }

            // Write $somecontent to our opened file.
            if (fwrite($handle, $default_config) === FALSE) {
                echo "Cannot write to file ($config_file)";
                exit;
            }

            $success = true;
            fclose($handle);

        } else {
            echo "The file $config_file is not writable but it does exist";
            exit(0);
        }
    }
} else {
        if (is_writable($config_file)) {

            // In our example we're opening $filename in append mode.
            // The file pointer is at the bottom of the file hence
            // that's where $somecontent will go when we fwrite() it.
            if (!$handle = fopen($config_file, 'w')) {
                 echo "Cannot open file ($filename)";
                 exit;
            }

            // Write $somecontent to our opened file.
            if (fwrite($handle, $default_config) === FALSE) {
                echo "Cannot write to file ($config_file)";
                exit;
            }

            $success = true;
            fclose($handle);

        } else {
            echo "The file $config_file does not exist and we are unable ";
            echo "to write to that location. Please log in to the system ";
            echo "and type the following commands:<br /><br />";
            echo "<code>touch /stweb.conf</code><br />";
            echo "<code>chown $whoami /stweb.conf</code>";
            exit(0);
        }


}

if ($success) {
    echo "The base config files ($config_file) did not exist, ";
    echo "but were successfully created with default values. ";
    echo "You can either edit that file directly or simply go ";
    echo "to the Admin page in this web interface<br /><br />";
    echo '<a href="main.php">Go to the main page</a>';
    exit(0);
} */

/* ======================= */
/*  Find the translations  */
/* ======================= */

/*if ($handle = opendir('/')) {
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            if (substr($file,0,6) == "stweb_") {
                // We have found a translation
                $translations[] = "/".$file;
                $languages[] = substr($file,6,2);
//                echo "$file<br />";
            }
        }
    }
    closedir($handle);
}*/

/* ======================== */
/* Read in the translations */
/* ======================== */

/*if (sizeof($translations) > 0) {
    $i = 0;
    foreach($translations as $translation) {
        $fp = fopen($translation, "r");
        while (!feof($fp)) {
          $line = trim(fgets($fp));
          if ($line && substr($line,0,1)!=$comment) {
            $pieces = explode("=", $line);
            $option = trim($pieces[0]);
            $value = trim($pieces[1]);
            $translated_values[$languages[$i]][$option] = $value;
          }
        }
        fclose($fp);
        $i++;
    }
} */


/* If the language is not english then we should use the config values
 * from the other language
 */
if ($language != "en") {
    //echo "Language: $language";
    $locale = $language."_".strtoupper($language);
    $result = setlocale(LC_ALL,$locale);
} else {
    //echo "Language: $language";
}

$config_values = $config_values_array[$language];

/* Set the defaults in case any of the values have not been set */
if ($config_values['LANGUAGE'] == "") {
    $config_values['LANGUAGE'] = "English";
}

if ($config_values['ALLOW_NUMBERS_MANUAL'] == "") {
    $config_values['ALLOW_NUMBERS_MANUAL'] = "NO";
}

if ($config_values['PER_PAGE'] == "") {
    $config_values['PER_PAGE'] = "20";
}

if ($config_values['PER_LEAD'] == "") {
    $config_values['PER_LEAD'] = "Price Per Lead";
}
if ($config_values['DNC_NUMBERS_TITLE'] == "") {
    $config_values['DNC_NUMBERS_TITLE'] = "Do Not Call List";
}
if ($config_values['DNC_VIEW'] == "") {
    $config_values['DNC_VIEW'] = "View existing DNC numbers";
}

if ($config_values['MENU_ADDFUNDS'] == "") {
    $config_values['MENU_ADDFUNDS'] = "Add Funds";
}

if ($config_values['DNC_ADD'] == "") {
    $config_values['DNC_ADD'] = "Add DNC number(s) manually";
}
if ($config_values['USE_SEPARATE_DNC'] == "") {
    $config_values['USE_SEPARATE_DNC'] = "YES";
}


if ($config_values['DNC_UPLOAD'] == "") {
    $config_values['DNC_UPLOAD'] = "Upload DNC numbers from a text file";
}

if ($config_values['NUMBERS_TITLE'] == "") {
    $config_values['NUMBERS_TITLE'] = "Number List Management";
}

if ($config_values['USE_GENERATE'] == "") {
    $config_values['USE_GENERATE'] = "YES";
}

if ($config_values['NUMBERS_VIEW'] == "") {
    $config_values['NUMBERS_VIEW'] = "View phone numbers";
}

if ($config_values['NUMBERS_SYSTEM'] == "") {
    $config_values['NUMBERS_SYSTEM'] = "Use System Lists";
}

if ($config_values['NUMBERS_GENERATE'] == "") {
    $config_values['NUMBERS_GENERATE'] = "Generate numbers automatically";
}

if ($config_values['NUMBERS_MANUAL'] == "") {
    $config_values['NUMBERS_MANUAL'] = "Add number(s) manually";
}

if ($config_values['NUMBERS_UPLOAD'] == "") {
    $config_values['NUMBERS_UPLOAD'] = "Upload numbers from a text file";
}

if ($config_values['NUMBERS_EXPORT'] == "") {
    $config_values['NUMBERS_EXPORT'] = "Export Phone Numbers";
}

if ($config_values['NUMBERS_SEARCH'] == "") {
    $config_values['NUMBERS_SEARCH'] = "Search for a phone number";
}

if ($config_values['SPARE1'] == "") {
    $config_values['SPARE1'] = "Spare 1 (unused)";
}

if ($config_values['SPARE2'] == "") {
    $config_values['SPARE2'] = "Spare 2 (unused)";
}

if ($config_values['SPARE3'] == "") {
    $config_values['SPARE3'] = "Spare 3 (unused)";
}

if ($config_values['SPARE4'] == "") {
    $config_values['SPARE4'] = "Spare 4 (unused)";
}

if ($config_values['SPARE5'] == "") {
    $config_values['SPARE5'] = "Spare 5 (unused)";
}

if ($config_values['MAIN_PAGE_USERNAME'] == "") {
    $config_values['MAIN_PAGE_USERNAME'] = "Username";
}

if ($config_values['MAIN_PAGE_PASSWORD'] == "") {
    $config_values['MAIN_PAGE_PASSWORD'] = "Password";
}

if ($config_values['MAIN_PAGE_LOGIN'] == "") {
    $config_values['MAIN_PAGE_LOGIN'] = "Login";
}

if ($config_values['ADD_CAMPAIGN'] == "") {
    $config_values['ADD_CAMPAIGN'] = "Add Campaign";
}

if ($config_values['VIEW_CAMPAIGN'] == "") {
    $config_values['VIEW_CAMPAIGN'] = "View Campaigns";
}

if ($config_values['CDR_TEXT'] == "") {
    $config_values['CDR_TEXT'] = "Call Details";
}

if ($config_values['BILLING_TEXT'] == "") {
    $config_values['BILLING_TEXT'] = "Billing Logs";
}

if ($config_values['SMTP_HOST'] == "") {
    $config_values['SMTP_HOST'] = "localhost";
}
if ($config_values['SMTP_FROM'] == "") {
    $config_values['SMTP_FROM'] = "user@mydomain.com";
}
if ($config_values['FRONT_PAGE_BILLING'] == "") {
    $config_values['FRONT_PAGE_BILLING'] = "NO";
}
if ($config_values['USE_BILLING'] == "") {
    $config_values['USE_BILLING'] = "NO";
}


?>
